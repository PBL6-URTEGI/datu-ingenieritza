- name: Wait for Cassandra to fully start up
  pause:
    seconds: 30
- name: Install debconf-utils
  become: yes
  apt:
    name: debconf-utils
    state: present

- name: Set Tripwire passphrase for Debconf
  become: yes
  debconf:
    name: tripwire
    question: tripwire/local-passphrase
    value: bombardeenapache
    vtype: password

- name: Confirm Tripwire passphrase for Debconf
  become: yes
  debconf:
    name: tripwire
    question: tripwire/local-passphrase-again
    value: bombardeenapache
    vtype: password

- name: Set Tripwire site key passphrase for Debconf
  become: yes
  debconf:
    name: tripwire
    question: tripwire/site-passphrase
    value: bombardeenapache
    vtype: password

- name: Confirm Tripwire site key passphrase for Debconf
  become: yes
  debconf:
    name: tripwire
    question: tripwire/site-passphrase-again
    value: bombardeenapache
    vtype: password
- name: Wait for Cassandra to fully start up
  pause:
    seconds: 30
- name: Install Tripwire
  become: yes
  apt:
    name: tripwire
    state: present
- name: Initialize Tripwire with expect
  become: yes
  expect:
    command: tripwire --init
    responses:
      "Please enter your site passphrase:": "bombardeenapache"
      "Please enter your local passphrase:": "bombardeenapache"
  args:
    creates: /var/lib/tripwire/*.twd
